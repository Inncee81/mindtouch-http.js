#!/bin/bash

if [ -z $1 ]; then
    echo "A version number must be supplied."
    exit 1
fi

yarn version --new-version $1 --no-git-tag-version
if [ $? -gt 0 ]; then
    echo "Failure setting the new version."
    exit 1
fi

yarn docs
if [ $? -gt 0 ]; then
    echo "Failed while generating the docs for release $1."
    exit 1
fi

yarn bundle
if [ $? -gt 0 ]; then
    echo "Failed while generating CJS bundle $1."
    exit 1
fi
